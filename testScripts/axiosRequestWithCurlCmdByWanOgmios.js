
const WebSocket = require('ws');

async function testWsRequest(){


// 
    let strWS = "http://44.229.225.45:1337";
    let client = new WebSocket(strWS);

    client.once('open', () => {
        const request = { 
            "type": "jsonwsp/request",
            "version": "1.0",
            "servicename": "ogmios",
            "methodname": "EvaluateTx",
            "args":{
                evaluate: "84ab00828258205941d64fda890701dd50e535bd08429675c521cfef2433e30942c4af5a37a40d01825820f32785b31130b784b5b88307a5f4a7e0cdae4bb1eecb5c1ebdc710d25d5038c40301838258390199691094a5ea73e056c26f5c479d09281f94ef10c8fa4f35036c40d9b447988adaed80aed8b30d898af67c06a9a98aca311922134c935267821a0011d28aa1581c25c5de5f5b286073c593edfd77b48abc7a48e5a4f3d4cd9d428ff935a14357414e1b00000006ddbdb080a300583931520b2576e83cfd074de6d0a300bfc4abc2c9eef6e02465eebc853f2d259b187aa287258c0b95e636a472391282dedb2eb17b8bf321bb14f101821a00129c92a1581c992eefaec3fed37e3cdd4e9063721f0f2e231d61934a9f538b492f5ca14a4d436865636b436f696e01028201d81845d8799f01ff8258390134c4f8796f4fbde6028dd507fb76ff7affa7f0ea17dcdf38fcc75eb834c4f8796f4fbde6028dd507fb76ff7affa7f0ea17dcdf38fcc75eb81a0099eee6021a000b9f05031a0701251e075820440fa8fb044494fdd1d88865c61e835f49056111934e7378660201afdd2e081909a1581c25c5de5f5b286073c593edfd77b48abc7a48e5a4f3d4cd9d428ff935a14357414e1b00000006ddbdb0800b58202f6749a41d614ad8b64f6a375b646ea8947fa9a24f748b84339c37490a8576c20d81825820f32785b31130b784b5b88307a5f4a7e0cdae4bb1eecb5c1ebdc710d25d5038c403108258390134c4f8796f4fbde6028dd507fb76ff7affa7f0ea17dcdf38fcc75eb834c4f8796f4fbde6028dd507fb76ff7affa7f0ea17dcdf38fcc75eb81a00a05183111a00170ef212848258205941d64fda890701dd50e535bd08429675c521cfef2433e30942c4af5a37a40d01825820fffb1b66bd78837ea0136587c354ee6a0991b6d0a2954e48d46a476b3ce683df008258204638758bdd55af1efd592ef77c85b2c0b76bfe0f43c52c36c669ba82768a5ed4008258207a6c62d8fc117dde024957379f83b5039d1f93f55da2acb1337f84db53a860a000a3008182582005375501168efcc32a1c173f4c371b658001ae171e7303f8be76bca3688b7023584017e34b80331acaeee48b4d0f4aae6ddfe70e862db133a77e9ebab86cb678e89f8c55f2de754f537dabcadc61f5dae67c88abb9904346e55d82ef8fa9dcf1ca0f03800582840000d87a9fd8799f581c99691094a5ea73e056c26f5c479d09281f94ef10c8fa4f35036c40d9581cb447988adaed80aed8b30d898af67c06a9a98aca311922134c935267581c25c5de5f5b286073c593edfd77b48abc7a48e5a4f3d4cd9d428ff9354357414e1b00000006ddbdb08058205941d64fda890701dd50e535bd08429675c521cfef2433e30942c4af5a37a40d01005820658109b0b3e993a6aad0bf92d0484857d6ce49b70676d5616b4611cb766fea5e1b0000018ded374d685840a5986867880523a39a515dd515553b5fc32bcbf2b8d46e00c8abeffa99fdbc1d60869f2044b2a1ff6044b97f9355652c1f7edeb9c174857f8dedf08ed460e881ffff821a0043a4de1a546a7e42840100d87980821a0026b5ce1a279aff6cf5a101a36b746f6b656e50616972494419020a64747970650968756e6971756549645820658109b0b3e993a6aad0bf92d0484857d6ce49b70676d5616b4611cb766fea5e",
            },
        };
        client.send(JSON.stringify(request));
    });
    
    client.on('message', function(msg) {
        const response = JSON.parse(msg);
        console.log("\n\n\n testWsRequest response: ", response);
        // do something with 'response'

        client.close();
    });

}

async function main(){

    await testWsRequest();
}

main();
